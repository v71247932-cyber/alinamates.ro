<!DOCTYPE html>
<html lang="ro">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chestionar - Alina MateÈ™</title>
    <link rel="stylesheet" href="../style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        .questionnaire-container {
            max-width: 800px;
            margin: 150px auto 80px;
            padding: 40px;
            background: var(--background-white);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
        }

        .question-group {
            margin-bottom: 35px;
            padding-bottom: 25px;
            border-bottom: 1px solid var(--secondary-color);
        }

        .question-group:last-child {
            border-bottom: none;
        }

        .question-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 15px;
            display: block;
        }

        .options-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option-item {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
        }

        .form-control-text {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--secondary-color);
            border-radius: 8px;
            font-family: var(--font-body);
            font-size: 1rem;
            transition: var(--transition);
        }

        .form-control-text:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px rgba(213, 189, 153, 0.2);
        }

        textarea.form-control-text {
            min-height: 100px;
            resize: vertical;
        }

        .matrix-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        .matrix-table th,
        .matrix-table td {
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid var(--secondary-color);
        }

        .matrix-table th:first-child,
        .matrix-table td:first-child {
            text-align: left;
        }

        .matrix-header {
            font-size: 0.9rem;
            color: var(--text-light);
            font-weight: 600;
        }

        .submit-container {
            text-align: center;
            margin-top: 40px;
        }

        .optional-badge {
            display: inline-block;
            padding: 4px 12px;
            background: var(--accent-color);
            color: var(--primary-color);
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 15px;
        }

        @media (max-width: 768px) {
            .questionnaire-container {
                margin-top: 100px;
                padding: 20px;
            }

            .matrix-table {
                display: block;
                overflow-x: auto;
            }
        }
    </style>
</head>

<body>
    <header class="header" id="dynamic-header"></header>

    <main class="container">
        <div class="questionnaire-container">
            <div class="text-center">
                <span class="optional-badge">OPÈšIONAL</span>
                <h1 class="section-title">Chestionar Preliminar</h1>
                <p class="section-subtitle">RÄƒspunsurile tale mÄƒ vor ajuta sÄƒ pregÄƒtesc prima È™edinÈ›Äƒ Ã®ntr-un mod cÃ¢t
                    mai potrivit pentru tine.</p>
            </div>

            <form id="detailedQuestionnaire">
                <!-- 1. Motivul principal -->
                <div class="question-group">
                    <label class="question-title">1. Care este principalul motiv pentru care ai ales sÄƒ Ã®ncepi
                        consilierea acum?</label>
                    <textarea name="q1_motiv" class="form-control-text" placeholder="RÄƒspunsul tÄƒu..."></textarea>
                </div>

                <!-- 2. Dificultati -->
                <div class="question-group">
                    <label class="question-title">2. Cu ce dificultÄƒÈ›i te confrunÈ›i Ã®n prezent? (poÈ›i bifa mai
                        multe)</label>
                    <div class="options-list">
                        <label class="option-item"><input type="checkbox" name="q2_dificultati"
                                value="Stres / anxietate"> Stres / anxietate</label>
                        <label class="option-item"><input type="checkbox" name="q2_dificultati"
                                value="TristeÈ›e / lipsÄƒ de motivaÈ›ie"> TristeÈ›e / lipsÄƒ de motivaÈ›ie</label>
                        <label class="option-item"><input type="checkbox" name="q2_dificultati"
                                value="Probleme de relaÈ›ie"> Probleme de relaÈ›ie (cuplu, familie, prieteni)</label>
                        <label class="option-item"><input type="checkbox" name="q2_dificultati"
                                value="StimÄƒ de sine scÄƒzutÄƒ"> StimÄƒ de sine scÄƒzutÄƒ</label>
                        <label class="option-item"><input type="checkbox" name="q2_dificultati" value="Burnout"> Burnout
                            / probleme legate de muncÄƒ</label>
                        <label class="option-item"><input type="checkbox" name="q2_dificultati"
                                value="DificultÄƒÈ›i de adaptare"> DificultÄƒÈ›i de adaptare / schimbÄƒri majore de
                            viaÈ›Äƒ</label>
                        <div class="option-item"
                            style="display: flex; align-items: center; flex-wrap: wrap; gap: 10px;">
                            <span>Alte dificultÄƒÈ›i:</span>
                            <input type="text" name="q2_alte_dificultati" class="form-control-text"
                                style="flex: 1; min-width: 200px;">
                        </div>
                    </div>
                </div>

                <!-- 3. Durata -->
                <div class="question-group">
                    <label class="question-title">3. De cÃ¢t timp te confrunÈ›i cu aceste dificultÄƒÈ›i?</label>
                    <div class="options-list">
                        <label class="option-item"><input type="radio" name="q3_durata" value="Mai puÈ›in de 1 lunÄƒ"> Mai
                            puÈ›in de 1 lunÄƒ</label>
                        <label class="option-item"><input type="radio" name="q3_durata" value="1â€“6 luni"> 1â€“6
                            luni</label>
                        <label class="option-item"><input type="radio" name="q3_durata" value="6â€“12 luni"> 6â€“12
                            luni</label>
                        <label class="option-item"><input type="radio" name="q3_durata" value="Peste 1 an"> Peste 1
                            an</label>
                    </div>
                </div>

                <!-- 4. Starea emotionala actuala -->
                <div class="question-group">
                    <label class="question-title">4. Cum ai descrie starea ta emoÈ›ionalÄƒ Ã®n ultima perioadÄƒ?</label>
                    <div class="options-list">
                        <label class="option-item"><input type="radio" name="q4_stare" value="Foarte bunÄƒ">
                            Foarte bunÄƒ</label>
                        <label class="option-item"><input type="radio" name="q4_stare" value="BunÄƒ"> BunÄƒ</label>
                        <label class="option-item"><input type="radio" name="q4_stare" value="AcceptabilÄƒ">
                            AcceptabilÄƒ</label>
                        <label class="option-item"><input type="radio" name="q4_stare" value="DificilÄƒ">
                            DificilÄƒ</label>
                        <label class="option-item"><input type="radio" name="q4_stare" value="Foarte dificilÄƒ"> Foarte
                            dificilÄƒ</label>
                    </div>
                </div>

                <!-- 5. Frecventa experiente -->
                <div class="question-group">
                    <label class="question-title">5. CÃ¢t de des ai experimentat urmÄƒtoarele Ã®n ultimele 2
                        sÄƒptÄƒmÃ¢ni?</label>
                    <table class="matrix-table">
                        <thead>
                            <tr>
                                <th>ExperienÈ›Äƒ</th>
                                <th class="matrix-header">Deloc</th>
                                <th class="matrix-header">Rareori</th>
                                <th class="matrix-header">Des</th>
                                <th class="matrix-header">Foarte des</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Stare de neliniÈ™te sau anxietate</td>
                                <td><input type="radio" name="q5_anxietate" value="Deloc"></td>
                                <td><input type="radio" name="q5_anxietate" value="Rareori"></td>
                                <td><input type="radio" name="q5_anxietate" value="Des"></td>
                                <td><input type="radio" name="q5_anxietate" value="Foarte des"></td>
                            </tr>
                            <tr>
                                <td>TristeÈ›e sau lipsÄƒ de speranÈ›Äƒ</td>
                                <td><input type="radio" name="q5_tristete" value="Deloc"></td>
                                <td><input type="radio" name="q5_tristete" value="Rareori"></td>
                                <td><input type="radio" name="q5_tristete" value="Des"></td>
                                <td><input type="radio" name="q5_tristete" value="Foarte des"></td>
                            </tr>
                            <tr>
                                <td>ObosealÄƒ emoÈ›ionalÄƒ</td>
                                <td><input type="radio" name="q5_oboseala" value="Deloc"></td>
                                <td><input type="radio" name="q5_oboseala" value="Rareori"></td>
                                <td><input type="radio" name="q5_oboseala" value="Des"></td>
                                <td><input type="radio" name="q5_oboseala" value="Foarte des"></td>
                            </tr>
                            <tr>
                                <td>Iritabilitate</td>
                                <td><input type="radio" name="q5_iritabilitate" value="Deloc"></td>
                                <td><input type="radio" name="q5_iritabilitate" value="Rareori"></td>
                                <td><input type="radio" name="q5_iritabilitate" value="Des"></td>
                                <td><input type="radio" name="q5_iritabilitate" value="Foarte des"></td>
                            </tr>
                            <tr>
                                <td>DificultÄƒÈ›i de concentrare</td>
                                <td><input type="radio" name="q5_concentrare" value="Deloc"></td>
                                <td><input type="radio" name="q5_concentrare" value="Rareori"></td>
                                <td><input type="radio" name="q5_concentrare" value="Des"></td>
                                <td><input type="radio" name="q5_concentrare" value="Foarte des"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- 6. Experienta anterioara -->
                <div class="question-group">
                    <label class="question-title">6. Ai mai participat anterior la consiliere/psihoterapie?</label>
                    <div class="options-list" id="previousExperienceToggle">
                        <label class="option-item"><input type="radio" name="q6_anterior" value="Da">
                            Da</label>
                        <label class="option-item"><input type="radio" name="q6_anterior" value="Nu"> Nu</label>
                    </div>
                </div>

                <!-- 7. Detalii experienta anterioara (Optional contextual) -->
                <div class="question-group" id="q7_details" style="display: none;">
                    <label class="question-title">7. Ce a fost util È™i ce nu a fost util pentru tine din acea
                        experienÈ›Äƒ?</label>
                    <textarea name="q7_experienta_detalii" class="form-control-text"
                        placeholder="RÄƒspunsul tÄƒu..."></textarea>
                </div>

                <!-- 8. Obiective -->
                <div class="question-group">
                    <label class="question-title">8. Ce È›i-ai dori sÄƒ obÈ›ii Ã®n urma procesului de consiliere?</label>
                    <textarea name="q8_obiective" class="form-control-text" placeholder="RÄƒspunsul tÄƒu..."></textarea>
                </div>

                <!-- 9. Semn imbunatatire -->
                <div class="question-group">
                    <label class="question-title">9. Care ar fi un semn clar pentru tine cÄƒ lucrurile s-au
                        Ã®mbunÄƒtÄƒÈ›it?</label>
                    <textarea name="q9_semn" class="form-control-text" placeholder="RÄƒspunsul tÄƒu..."></textarea>
                </div>

                <!-- 10. Asteptari -->
                <div class="question-group">
                    <label class="question-title">10. Ce aÈ™teptÄƒri ai de la consilier È™i de la procesul de
                        consiliere?</label>
                    <textarea name="q10_asteptari" class="form-control-text" placeholder="RÄƒspunsul tÄƒu..."></textarea>
                </div>

                <!-- 11. Resurse -->
                <div class="question-group">
                    <label class="question-title">11. Ai persoane de sprijin Ã®n viaÈ›a ta (familie, prieteni)?</label>
                    <div class="options-list">
                        <label class="option-item"><input type="radio" name="q11_sprijin" value="Da">
                            Da</label>
                        <label class="option-item"><input type="radio" name="q11_sprijin" value="ParÈ›ial">
                            ParÈ›ial</label>
                        <label class="option-item"><input type="radio" name="q11_sprijin" value="Nu"> Nu</label>
                    </div>
                </div>

                <!-- 12. Ce a ajutat -->
                <div class="question-group">
                    <label class="question-title">12. Ce te-a ajutat pÃ¢nÄƒ acum sÄƒ faci faÈ›Äƒ dificultÄƒÈ›ilor?</label>
                    <textarea name="q12_ajutor" class="form-control-text" placeholder="RÄƒspunsul tÄƒu..."></textarea>
                </div>

                <div id="questFeedback" class="form-feedback" style="display: none; margin-bottom: 20px;"></div>

                <div class="submit-container">
                    <button type="submit" class="btn btn-primary">Trimite Chestionarul</button>
                    <p style="margin-top: 15px; font-size: 0.9rem; color: var(--text-light);">MulÈ›umesc pentru
                        completare! RÄƒspunsurile tale mÄƒ vor ajuta sÄƒ pregÄƒtesc prima È™edinÈ›Äƒ.</p>
                </div>
            </form>
        </div>
    </main>

    <footer class="footer" id="dynamic-footer"></footer>

    <script src="../script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Load header and footer dynamically
            fetch('../header.html').then(r => r.text()).then(h => {
                document.getElementById('dynamic-header').innerHTML = h;
                // Update links to point to parent directory
                document.querySelectorAll('#dynamic-header a').forEach(a => {
                    let href = a.getAttribute('href');
                    if (href && !href.startsWith('http') && !href.startsWith('#')) {
                        a.setAttribute('href', '../' + href);
                    }
                });
            });
            fetch('../footer.html').then(r => r.text()).then(f => {
                document.getElementById('dynamic-footer').innerHTML = f;
                // Update links to point to parent directory
                document.querySelectorAll('#dynamic-footer a').forEach(a => {
                    let href = a.getAttribute('href');
                    if (href && !href.startsWith('http')) {
                        a.setAttribute('href', '../' + href);
                    }
                });
            });

            // Toggle q7 based on q6
            const prevExpRadios = document.querySelectorAll('input[name="q6_anterior"]');
            const q7Group = document.getElementById('q7_details');
            prevExpRadios.forEach(r => {
                r.addEventListener('change', (e) => {
                    q7Group.style.display = e.target.value === 'Da' ? 'block' : 'none';
                });
            });

            // Handle Questionnaire Submission
            const questForm = document.getElementById('detailedQuestionnaire');
            const questFeedback = document.getElementById('questFeedback');

            if (questForm) {
                questForm.addEventListener('submit', async (e) => {
                    e.preventDefault();

                    const formData = new FormData(questForm);
                    const data = {};

                    // Handle multi-value fields like checkboxes
                    formData.forEach((value, key) => {
                        if (data[key]) {
                            if (!Array.isArray(data[key])) {
                                data[key] = [data[key]];
                            }
                            data[key].push(value);
                        } else {
                            data[key] = value;
                        }
                    });

                    // Format message for Discord
                    let message = "ðŸ“ **Chestionar Preliminar Nou**\n\n";

                    const questionLabels = {
                        q1_motiv: "1. Motiv principal",
                        q2_dificultati: "2. DificultÄƒÈ›i",
                        q2_alte_dificultati: "2b. Alte dificultÄƒÈ›i",
                        q3_durata: "3. DuratÄƒ difficulties",
                        q4_stare: "4. Stare emoÈ›ionalÄƒ",
                        q5_anxietate: "5a. Anxietate",
                        q5_tristete: "5b. TristeÈ›e",
                        q5_oboseala: "5c. ObosealÄƒ",
                        q5_iritabilitate: "5d. Iritabilitate",
                        q5_concentrare: "5e. Concentrare",
                        q6_anterior: "6. ExperienÈ›Äƒ anterioarÄƒ",
                        q7_experienta_detalii: "7. Detalii exp. anterioarÄƒ",
                        q8_obiective: "8. Obiective",
                        q9_semn: "9. Semn Ã®mbunÄƒtÄƒÈ›ire",
                        q10_asteptari: "10. AÈ™teptÄƒri",
                        q11_sprijin: "11. Persoane sprijin",
                        q12_ajutor: "12. Ce a ajutat"
                    };

                    for (const [key, label] of Object.entries(questionLabels)) {
                        if (data[key]) {
                            message += `**${label}:** ${Array.isArray(data[key]) ? data[key].join(', ') : data[key]}\n`;
                        }
                    }

                    const submitBtn = questForm.querySelector('button[type="submit"]');
                    submitBtn.disabled = true;
                    submitBtn.textContent = 'Se trimite...';

                    try {
                        const response = await fetch('https://discord.com/api/webhooks/1454099935594024962/xu6mrgw8mHVrFJpQmdyZ4hgxnTf1t_HMEd2EMix9Gfnbm-QxbT0B6bg8dS4iAPLfqB6F', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({ content: message })
                        });

                        if (response.ok) {
                            questForm.reset();
                            questFeedback.textContent = 'MulÈ›umesc! RÄƒspunsurile tale au fost trimise cu succes.';
                            questFeedback.className = 'form-feedback success';
                            questFeedback.style.display = 'block';
                            window.scrollTo({ top: 0, behavior: 'smooth' });
                            setTimeout(() => {
                                window.location.href = '../index.html';
                            }, 3000);
                        } else {
                            throw new Error('Eroare la trimitere');
                        }
                    } catch (error) {
                        questFeedback.textContent = 'Eroare la trimiterea chestionarului. Te rog Ã®ncearcÄƒ din nou.';
                        questFeedback.className = 'form-feedback error';
                        questFeedback.style.display = 'block';
                    } finally {
                        submitBtn.disabled = false;
                        submitBtn.textContent = 'Trimite Chestionarul';
                    }
                });
            }
        });
    </script>
</body>

</html>